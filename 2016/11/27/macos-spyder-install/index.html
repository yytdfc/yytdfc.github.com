<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> macOS下Python 3科学计算Spyder环境搭建 · Votec</title><meta name="description" content="macOS下Python 3科学计算Spyder环境搭建 - ChenFu"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://votec.top/atom.xml" title="Votec"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/images/logo.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/tags/" target="_self" class="nav-list-link">TAGS</a></li><li class="nav-list-item"><a href="https://github.com/yytdfc" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">macOS下Python 3科学计算Spyder环境搭建</h1><div class="post-info">Nov 27, 2016<full_date item.date ll>&#8853 <span id="busuanzi_container_page_pv">Viewed<span id="busuanzi_value_page_pv"></span> times</span></full_date></div><div class="post-content"><h2 id="brew-python3的不服"><a href="#brew-python3的不服" class="headerlink" title="brew python3的不服"></a>brew python3的不服</h2><p>由于之前使用<em>brew</em>安装的<em>Python3</em>各种不服，找不到pip(可使用<code>python -mpip</code>命令代替解决)，pip更新出错，安装Spyder后离奇bug：<code>NameError: name &#39;runfile&#39; is not defined</code>… 但是<em>macvim</em>又要依赖于<em>Python</em>，不管他，直接<code>brew install macvim</code>然后这个依赖应该忽略不计了。<br><a id="more"></a></p>
<h2 id="安装-amp-卸载Anaconda"><a href="#安装-amp-卸载Anaconda" class="headerlink" title="安装&amp;卸载Anaconda"></a>安装&amp;卸载Anaconda</h2><p>尝试安装<em>Anaconda</em>，<em>Anaconda</em>但是其实是內建的环境，而且目前只release到<em>Spyder2</em>，因此卸载之，干净卸载参考<a href="https://docs.continuum.io/anaconda/install#simple-remove" target="_blank" rel="external">官方文档Simple remove部分</a>：</p>
<blockquote>
<p><strong>Simple remove</strong></p>
<p><em>WINDOWS</em>: In the Control Panel, choose “Add or Remove Programs” or “Uninstall a program” and then select “Python 3.5 (Anaconda)” or your version of Python.</p>
<p><em>OS X</em>: Open the Terminal.app or iTerm2 terminal application and remove your entire Anaconda directory, which will have a name such as “anaconda2” or “anaconda3”, by entering the following command: <code>rm -rf ~/anaconda3</code></p>
<p><em>LINUX</em>: Open a terminal window and remove your entire Anaconda directory, which will have a name such as “anaconda2” or “anaconda3”, by entering the following command: <code>rm -rf ~/anaconda3</code></p>
</blockquote>
<p>然后，顺便清理一下环境变量就好了。</p>
<p>好了，鉴于上述的种种问题，虽然凑凑活活都没问题，但是<strong>依然不爽</strong>。墨迹墨迹终于决定要重新搭建一个干净舒服的Python科学计算环境了。正文部分开始。</p>
<h2 id="Python3安装"><a href="#Python3安装" class="headerlink" title="Python3安装"></a>Python3安装</h2><p><em>Python 2 vs 3</em>之争不多说，反正我觉得以后用3就对了，但是写程序注意一下<code>print()</code>、<code>range()</code>、浮点数之类的语法，尽量保证程序版本都兼容比较好。被<em>brew</em>伤了心，这次乖乖的去安装<a href="https://www.python.org/downloads/mac-osx/" target="_blank" rel="external">官网的Python3</a>，省时省心，安全可靠，不用心疼自己MAC去编译了。过程很简单，下载安装就好。</p>
<p>安装完可以更改一下pip源，试过<em>阿里云</em>的源不错，速度稳稳上1MB。编辑<code>.pip/pip.conf</code>，我是这样写的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">[global]</div><div class="line">timeout = 6000</div><div class="line">trusted-host = mirrors.aliyun.com</div><div class="line">index-url = http://mirrors.aliyun.com/pypi/simple</div><div class="line">[install]</div><div class="line">timeout = 6000</div><div class="line">use-mirrors = true</div><div class="line">trusted-host = mirrors.aliyun.com</div><div class="line">index-url = http://mirrors.aliyun.com/pypi/simple</div></pre></td></tr></table></figure>
<p>最后记得<code>pip3 install --upgrade pip</code>更新一下pip。</p>
<h2 id="Spyder3安装"><a href="#Spyder3安装" class="headerlink" title="Spyder3安装"></a>Spyder3安装</h2><p><em>Python</em>科学计算的平台用过几个，但是还是<em>Spyder</em>用的比较舒心。版本虽然已经到3了，但是<em>Anaconda</em>还没跟上，还是自己单独安装比较舒服。</p>
<p>安装参考<a href="https://github.com/spyder-ide/spyder/releases" target="_blank" rel="external">官方安装指南</a>，看到官方放出最新的Release着实有点大了，完全把所有的<em>Python</em>环境打包了，用的不是本地的，有点臃肿，嫌麻烦的自然可以考虑。所以，选择手动安装之。用官方的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip3 install -U spyder</div></pre></td></tr></table></figure>
<p>装好好发现不能启动，自己一点一点找问题，最后发现虽然装了<strong>QtPy</strong>，但是缺少了<strong>PyQt5</strong>库，安装之。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip3 install PyQt5</div></pre></td></tr></table></figure>
<p>再试着运行Spyder就妥妥没问题了。</p>
<p>但是命令行启动总是要占一个窗口，终端后台运行又有点尴尬。所以目光转向了官方打包好的Release，从它开始动手，把其他的东西全去掉，只留图标和包说明文件就好，把<code>Contents/MacOS/Spyder</code>替换成刚安装好的<code>/Library/Frameworks/Python.framework/Versions/3.5/bin/Spyder</code>就OK了，应用从600多MB到197KB，好舒心~ <code>tree Spyder.app</code>之后大概是这个样子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">Spyder.app</div><div class="line">└── Contents</div><div class="line">├── Info.plist</div><div class="line">├── MacOS</div><div class="line">│   └── Spyder</div><div class="line">├── PkgInfo</div><div class="line">└── Resources</div><div class="line">└── spyder.icns</div><div class="line">3 directories, 4 files</div></pre></td></tr></table></figure>
<p><code>~/.bash_profile</code>添加<code>alias spyder=&quot;open -a Spyder&quot;</code>后，用<code>spyder</code>命令启动非常完美，而且还可以点图标启动哦，终于不是Python小火箭图标了。</p>
<h2 id="其他科学计算库"><a href="#其他科学计算库" class="headerlink" title="其他科学计算库"></a>其他科学计算库</h2><p>然后安装其他的一些科学计算库：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">pip3 install numpy scipy pandas scikit-learn</div><div class="line">pip3 install ipython notebook cython</div><div class="line">pip3 install networkx</div><div class="line"><span class="built_in">export</span> TF_BINARY_URL=https://storage.googleapis.com/tensorflow/mac/cpu/tensorflow-0.11.0-py3-none-any.whl\</div><div class="line">sudo pip3 install --upgrade <span class="variable">$TF_BINARY_URL</span></div></pre></td></tr></table></figure>
<p><strong><em>END</em></strong></p>
</div></article></div></main><footer><div class="paginator"><a href="/2016/11/27/macos-default-write/" class="prev">Prev</a><a href="/2016/11/26/markdown/" class="next">Next</a></div><div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div><script src="https://img1.cache.netease.com/f2e/tie/yun/sdk/loader.js"></script><script>var cloudTieConfig = {url: document.location.href,sourceId: "2016/11/27/macos-spyder-install/",productKey: "b710aea8146b4b82be4291d960552145",target: "cloud-tie-wrapper"};
var yunManualLoad = true;
Tie.loader("aHR0cHM6Ly9hcGkuZ2VudGllLjE2My5jb20vcGMvbGl2ZXNjcmlwdC5odG1s", true);</script><div class="copyright"><p>© 2016~2017 <a href="http://votec.top">ChenFu</a>  &#8225  Site viewed <span id="busuanzi_value_site_pv"></span> times.</span></p><p>Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> + <a href="https://github.com/yytdfc/hexo-theme-apollo-plus" target="_blank">apollo</a> <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_site_pv"></p></div></footer></div><script type="text/x-mathjax-config">MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});</script><script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_CHTML" type="text/javascript"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-100648993-1','auto');ga('send','pageview');</script><script>var _hmt = _hmt || [];
(function() {
var hm = document.createElement("script");
hm.src = "https://hm.baidu.com/hm.js?3a1457089b82f026e9a39fbe773531ff";
var s = document.getElementsByTagName("script")[0];
s.parentNode.insertBefore(hm, s);
})();</script><script type="text/javascript" src="http://tajs.qq.com/stats?sId=59104549" charset="UTF-8"></script></body></html>